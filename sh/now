#!/bin/sh
CPU=$(grep 'cpu ' /proc/stat | awk '{printf "%0.1f", 100*($2+$4)/($2+$4+$5)}')
MEM=$(free | grep Mem | awk '{printf "%0.1f", 100*$3/$2}')
status=$(cat /sys/class/power_supply/BAT1/status)
charge=$(cat /sys/class/power_supply/BAT1/capacity)
ut=$(cat /proc/uptime | cut -d\. -f1)
day=$(($ut/86400))
hrs=$(($ut%86400/3600))
min=$(($ut%3600/60))
sec=$(($ut%60))

printf "$(date +'%Yë…„%-mì›”%-dì¼(%a) %p%-I:%M:%S') | â±ï¸  %d+%02d:%02d:%02d" $day $hrs $min $sec

for i in CPU MEM; do
 j=$(eval echo \$$i)
 [ "${j%.*}" -ge 70 ] && printf " | $i \e[91m%0.1f%%\e[0m" $j || printf " | $i \e[32m%0.1f%%\e[0m" $j
done

if [ "$status" = "Charging" ]; then
 printf " | ğŸ”Œ "
elif [ "$status" = "Discharging" ]; then
 printf " | ğŸ”‹ "
else
 printf " | â”ï¸ "
fi

if [ $charge -lt 20 ] && [ $status != Charging ]; then
#printf " ğŸ˜“\n"
 printf "\e[91m$charge%%\e[0m\n"
else
#printf " ğŸ™‚ï¸"
 printf "\e[32m$charge%%\e[0m\n"
fi
